<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Reward Ad</title>
<style>
body { font-family: Arial; text-align: center; padding: 30px; }
button { padding: 12px 25px; font-size: 18px; margin-top: 20px; }
#timer { font-size: 22px; margin-top: 20px; }
</style>
</head>

<body>

<h2>Watch Ad to Get Reward</h2>

<!-- STATUS -->
<div id="status">Click the button below to show Ad.</div>

<!-- Show Ad Button -->
<button id="adBtn">Show Rewarded Ad</button>

<!-- Timer -->
<div id="timer"></div>

<!-- Collect Button -->
<button id="collectBtn" style="display:none;">Collect Reward</button>


<!-- Telegram Web App -->
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<!-- Monetag -->
<script src="https://libtl.com/sdk.js" data-zone="10281283" data-sdk="show_10281283"></script>

<script>
const tg = window.Telegram.WebApp;
tg.expand();

const status = document.getElementById("status");
const adBtn = document.getElementById("adBtn");
const timerBox = document.getElementById("timer");
const collectBtn = document.getElementById("collectBtn");

function wait(ms) { return new Promise(r => setTimeout(r, ms)); }

adBtn.onclick = async function() {
    status.textContent = "Loading Ad...";
    adBtn.disabled = true;

    await window.show_10281283().then(async () => {
        status.textContent = "Ad Completed! 15 sec timer started.";

        for (let i = 15; i >= 0; i--) {
            timerBox.textContent = "‚è≥ " + i + " seconds remaining...";
            await wait(1000);
        }

        timerBox.textContent = "";
        collectBtn.style.display = "block";
        status.textContent = "Tap Collect Reward";
    });
};

collectBtn.onclick = function() {
    tg.sendData(JSON.stringify({ ad_completed: true }));
};
</script>

</body>
</html>
